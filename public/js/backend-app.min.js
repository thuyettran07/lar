function moveNode(e,t){$.ajax({url:controllerName+"/move-node",type:"put",dataType:"html",data:{id:e,type:t,_token:$('meta[name="csrf-token"]').attr("content")},success:function(){$(".datatables").DataTable().ajax.reload()}})}function deleteNode(e){return confirm("Confirm delete this item?")&&$.ajax({url:controllerName+"/delete-node",type:"delete",data:{id:e,_token:$('meta[name="csrf-token"]').attr("content")},success:function(){$("#row-"+e).hide(400)},complete:function(){$(".datatables").DataTable().ajax.reload()}}),!1}function addCategory(){$(".add-category #name").val()?$.ajax({url:controllerName+"/add?"+$("form.add-category").serialize(),type:"post",dataType:"html",data:{_token:$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){$(".loading-container").removeClass("loading-inactive")},success:function(e){$(".datatables").DataTable().ajax.reload(),$(".add-category input").val("")},complete:function(){$(".loading-container").addClass("loading-inactive")}}):$(".add-category #name").addClass("error")}function addItem(){var e="";"undefined"!=typeof tinyMCE&&(e=tinyMCE.get("description").getContent()),$("#description").length&&$("#description").val()&&(e=$("#description").val()),$("#name").val()||$("#username").val()?$.ajax({url:controllerName+"/add?"+$(".modal form").serialize(),type:"post",dataType:"html",data:{description:e,_token:$('meta[name="csrf-token"]').attr("content")},success:function(e){$(".alert-info").removeClass("hidden")},complete:function(){setTimeout(function(){$(".alert-info").addClass("hidden")},700),$("#add-or-edit").modal("hide"),$(".datatables").DataTable().ajax.reload()}}):$("#name").addClass("error")}function deleteItem(e){return confirm("Confirm delete this record?")&&$.ajax({url:controllerName+"/delete",type:"delete",dataType:"html",data:{id:e,_token:$('meta[name="csrf-token"]').attr("content")},success:function(){$("#row-"+e).hide(400)},error:function(){},complete:function(){$(".datatables").DataTable().ajax.reload()}}),!1}function deleteItems(){var e=$(".cid:checked").map(function(){return this.value});return e.length&&confirm("Confirm delete this records?")&&$.ajax({url:controllerName+"/delete",typeData:"html",type:"delete",data:{id:e.get().join(","),_token:$('meta[name="csrf-token"]').attr("content")},success:function(e){},error:function(e){return alert('Can"t delete this records.'),!1},complete:function(){$(".datatables").DataTable().ajax.reload()}}),!1}function changeStatus(e,t){$.ajax({url:controllerName+"/change-status",data:{id:e,status:t},success:function(a){0==t?$("#row-"+e+" .status").html('<i class="icon un-public" onclick="changeStatus('+e+', 1)"></i>'):$("#row-"+e+" .status").html('<i class="icon public" onclick="changeStatus('+e+', 0)"></i>')}})}function changeFeatured(e,t){$.ajax({url:controllerName+"/change-featured",data:{id:e,featured:t},success:function(a){0==t?$("#row-"+e+" .featured").html('<i class="icon icon-no-featured" onclick="changeFeatured('+e+', 1)"></i>'):$("#row-"+e+" .featured").html('<i class="icon icon-featured" onclick="changeFeatured('+e+', 0)"></i>')}})}function changeRegisterStatus(e,t){$.ajax({url:controllerName+"/change-register-status",data:{id:e,status:t},success:function(a){0==t?$("#row-"+e+" .register").html('<i class="icon un-public" onclick="changeRegisterStatus('+e+', 1)"></i>'):$("#row-"+e+" .register").html('<i class="icon public" onclick="changeRegisterStatus('+e+', 0)"></i>')}})}function changeStatusForMultipleItems(e){var t=$(".cid:checked").map(function(){return this.value});$.ajax({url:controllerName+"/change-status",typeData:"html",data:{id:t.get().join(","),status:e},success:function(a){var i=t.toArray();$.each(i,function(t,a){e?$("#row-"+a+" .status").html('<i class="icon public" onclick="changeStatus('+a+', 0)"></i>'):$("#row-"+a+" .status").html('<i class="icon un-public" onclick="changeStatus('+a+', 1)"></i>')})}})}function getDataById(e){$(".btn-action .btn-default").show(),$(".modal form .btn-primary").attr({"data-action":"edit","data-id":e}),$("#add-or-edit").addClass("edit").removeClass("add"),setValueDefault(),$.ajax({url:controllerName+"/get-data-by-id",dataType:"json",data:{id:e},success:function(t){if(console.log(t),$.each(t,function(e,t){"password"!=e&&$(".modal-content #"+e).val(t)}),$("#password-of-user").hide(),$("#show-ip-address").show(),t.image){var a=$("#upload-img").attr("data-type");$(".modal #category-image img").attr("src",baseUrl+"/resources/upload/"+a+"/208x208/"+t.image)}else if(t.avatar){var a=$("#upload-img").attr("data-type");$("#image").val(t.avatar),$(".modal #category-image img").attr("src",baseUrl+"/resources/upload/"+a+"/208x208/"+t.avatar)}else $(".modal #category-image img").attr("src",baseUrl+"/public/images/no_photo.jpg");if($("#description").length>0&&tinyMCE.get("description").setContent(t.description),$("#save-item").attr("onclick","editItem("+e+")"),$(".modal").modal("show"),$("#add-or-edit").length>0&&("undefined"!=typeof t.group&&t.group.name&&$(".add-edit-group-modal #name").val(t.group.name),$(".add-edit-group-modal .btn-primary").attr({type:"button",onclick:"updateGroup("+e+", event)"}),$(".add-edit-group-modal").length)){var i=$(".add-edit-group-modal .list-action").find('input[type="checkbox"]'),n=t.permission_id;n.map(function(e,t){i.map(function(t,a){$(a).attr("data-id")==e&&($(a).prop("checked",!0),$(a).closest("label").addClass("active"))})})}if("undefined"!=typeof t.mentor&&t.mentor&&$("#value_of_parent_id").html(t.mentor),"undefined"!=typeof t.username&&t.username&&$("#value_of_user_id").html(t.username),$("#mentor-id").length>0&&t.id&&$("#mentor-id").val(t.id),$("#email-of-mentor").length>0){var r=$("#email-of-mentor input").val();$("#email-of-mentor input").val(r.substring(0,r.indexOf("@")))}$("#email-password label").html("New password"),$(".add-edit-mentor-modal").length&&($(".add-edit-mentor-modal h4.modal-title").html("Edit Mentor"),$(".add-edit-mentor-modal #ssn").val("xxx-xx-xxxx").attr("disabled",!0),$(".add-edit-mentor-modal #ssn").attr("data-toggle","tooltip"),$(".add-edit-mentor-modal #ssn").attr("data-placement","top"),$(".add-edit-mentor-modal #ssn").attr("title","This field will be hidden for security."),$(".add-edit-mentor-modal #search-mentor .col-md-8").html('<input type="text" class="form-control" name="" disabled="disabled" id="" value="'+t.mentor+'" />'),$(".add-edit-mentor-modal #search-user .col-md-8").html('<input type="text" class="form-control" name="" disabled="disabled" id="" value="'+t.username+'" />'),null!=t.email?$(".add-edit-mentor-modal #email").val(t.email).attr("disabled",!0):$(".add-edit-mentor-modal #email").attr("disabled",!0)),$(".add-edit-permission-modal").length&&($("#permission-description").val(t.description),$("#controller-group").val(t.controller_group),$("#action-group").val(t.action_group),$("#submit-permission-button").attr("onclick","return updatePermission("+t.id+", event)"))}})}function getError(e,t){var a='<div class="row">';return a+='<div class="col-sm-12">',a+='<div class="alert alert-'+e+' alert-dismissible" role="alert">',a+='<button type="button" class="close" data-dismiss="alert" aria-label="Close">',a+='<span aria-hidden="true">&times;</span>',a+="</button>","success"==e?a+="<strong>Complete!</strong> "+t:"danger"==e&&(a+="<strong>Warning!</strong> "+t),a+="</div>",a+="</div>",a+="</div>"}function updateGroup(e,t){t.preventDefault();var a={name:$(".add-edit-group-modal #name").val(),permission_id:[],id:e,_token:$('meta[name="csrf-token"]').attr("content")},i=$(".add-edit-group-modal .list-action").find('input[type="checkbox"]:checked'),n=i.map(function(){return $(this).attr("data-id")});a.permission_id=n.toArray(),$.ajax({url:controllerName+"/update",type:"put",data:a,success:function(e){if($("#display-group-error").html(""),1==e.status)$("#display-group-error").html(getError("success","Update group successfully.")),setTimeout(function(){$(".add-edit-group-modal").trigger("reset"),$("#display-group-error").html(""),$("#add-or-edit").modal("hide"),location.reload()},1e3);else{if("errors"!=e.status)return!1;$("#display-group-error").html(getError("danger",e.errors))}}})}function editItem(e){var t="";$("#description").length>0&&(t=tinyMCE.get("description").getContent()),$.ajax({url:controllerName+"/edit?"+$(".modal form").serialize(),type:"put",data:{description:t,_token:$('meta[name="csrf-token"]').attr("content"),id:e},success:function(e){$(".alert-success").removeClass("hidden")},complete:function(){setTimeout(function(){$(".modal").modal("hide"),$(".alert-success").addClass("hidden")},800),$(".datatables").DataTable().ajax.reload()}})}function uploadImg(e,t){$.ajax({url:controllerName+"/upload-image",type:"post",dataType:"html",data:e,cache:!1,processData:!1,contentType:!1,success:function(e){$("#category-image img").attr("src",baseUrl+"/resources/upload/"+t+"/208x208/"+e),$("#image").val(e)}})}function updateOrdering(e,t,a){$.ajax({url:controllerName+"/update-ordering",dataType:"html",type:"put",data:{id:e,index:t,move:a,_token:$('meta[name="csrf-token"]').attr("content")},success:function(e){$(".datatables").DataTable().ajax.reload()}})}function deleteOne(e){var t=window.location.origin+"/bcu-dev/bcu/";return!(isNaN(e)||parseInt(e)<0)&&(confirm("Confirm delete this user ?")&&$.ajax({url:t+"nvp-admin/user/"+e+"/delete",type:"post",dataType:"json",data:{id:e,_token:$('meta[name="csrf-token"]').attr("content")},success:function(e){return"1"==e.status&&(alert("User has been deleted !"),void location.reload())},error:function(){return!1}}),!1)}function addGroup(e){e.preventDefault();var t={name:$(".add-edit-group-modal").find("input#name").val(),permission_id:[],_token:$('meta[name="csrf-token"]').attr("content")},a=$(".add-edit-group-modal .list-action").find('input[type="checkbox"]:checked'),i=a.map(function(){return $(this).attr("data-id")});t.permission_id=i.toArray(),$.ajax({url:controllerName+"/add",type:"post",data:t,success:function(e){if($("#display-group-error").html(""),1==e.status)$("#display-group-error").html(getError("success","Add new group successfully.")),setTimeout(function(){$(".add-edit-group-modal").trigger("reset"),$("#add-or-edit").modal("hide"),location.reload()},1e3);else{if("errors"!=e.status)return!1;$("#display-group-error").html(getError("danger",e.errors))}},error:function(){},complete:function(){}})}function sendMail(e){$.ajax({url:controllerName+"/send-mail",type:"post",dataType:"json",data:{email:e,_token:$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){$("#send-mail").html('<img src="'+baseUrl+'/public/images/loading-spin.svg" width="20px"/>')},success:function(e){1==e.status?alert("Send mail success !"):alert("Send mail error !")},error:function(e){alert("Connect to server error !")},complete:function(){$("#send-mail").html("Send Mail Demo")}})}function searchMentor(e){if(e.preventDefault(),ajaxSearchMentor===!0)return!1;var t=$("#mentor").val();return 0==t.length?location.reload():void $.ajax({url:baseUrl+"/nvp-admin/mentors-manager/search",type:"post",dataType:"html",data:{mentorName:t,_token:$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){ajaxSearchMentor=!0},success:function(e){$("#result").html(e),$("#result").find("#mentor").val(t)},error:function(e){return alert("HTTP error occurred"),!1},complete:function(){ajaxSearchMentor=!1}})}function getMentorByNameOrEmail(e){$.ajax({url:controllerName+"/get-mentor-data",type:"get",data:{mentorData:e,_token:$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){$(".select-container input").addClass("loadding")},success:function(e){e.id?$("#search-mentor .select-results").html('<li data-id="'+e.id+'" data-value="'+e.email+'">'+e.email+"</li>"):$("#search-mentor .select-results").html("<li>No Data</li>")},complete:function(){$(".select-container input").removeClass("loadding")}})}function getUserByNameOrEmail(e){$.ajax({url:controllerName+"/get-user-data",type:"get",data:{userData:e,_token:$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){$(".select-container input").addClass("loadding")},success:function(e){e?$("#search-user .select-results").html('<li data-id="'+e.id+'" data-value="'+e.email+'">'+e.email+"</li>"):$("#search-user .select-results").html("<li>Not found consistent data</li>")},complete:function(){$(".select-container input").removeClass("loadding")}})}function saveMentor(e){e.preventDefault();var t="";if($("#add-or-edit").hasClass("edit"))var a="edit",t=$("#mentor-id").val(),i=$("#email").val();else var a="add";data=$("#mentor-form").serialize(),data+="&_token="+$('meta[name="csrf-token"]').attr("content"),data+="&action="+a,t&&(data+="&id="+t,data+="&email="+i);var n=0;$.ajax({url:controllerName+"/save",type:"post",data:data,beforeSend:function(){$("#submit-mentor-button").html('<img src="'+baseUrl+'/public/images/loading-spin.svg" />')},success:function(e){if($("#display-mentor-error").html(""),$(".display-mentor-error").html(""),"errors"==e.status)$.isPlainObject(e.errors)&&$.map(e.errors,function(e,t){var a=e[0],i=t.replace("_","-"),n='<div class="row">';n+='<div class="col-sm-12">',n+='<div class="alert alert-danger alert-dismissible" role="alert">',n+='<button type="button" class="close" data-dismiss="alert" aria-label="Close">',n+='<span aria-hidden="true">&times;</span>',n+="</button>",n+=a,n+="</div>",n+="</div>",n+="</div>",$("#"+i+"-error").length&&$("#"+i+"-error").html(n)}),n=1;else if("mail-errors"==e.status){var t='<div class="row">';t+='<div class="col-sm-12">',t+='<div class="alert alert-danger alert-dismissible" role="alert">',t+='<button type="button" class="close" data-dismiss="alert" aria-label="Close">',t+='<span aria-hidden="true">&times;</span>',t+="</button>",t+="<strong>Warning!</strong> "+e.mail_errors,t+="</div>",t+="</div>",t+="</div>",$("#display-mentor-error").html(t),n=1}else n=0},complete:function(){$("#submit-mentor-button").html("Save Changes"),n||($(".alert-success").removeClass("hidden"),setTimeout(function(){$(".modal").modal("hide"),$(".alert-success").addClass("hidden")},800),$(".datatables").DataTable().ajax.reload(),$("#submit-mentor-button").html("Save changes"))}})}function getAllDescendantsOfCurrentMentor(e,t){return e.preventDefault(),1!=ajaxLoad&&void $.ajax({url:baseUrl+"/nvp-admin/mentors-manager/get-descendants/"+t,type:"get",data:{_token:$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){ajaxLoad=!0},success:function(e){console.log(e),1==e.status&&($('.mentor-info[data-id="'+t+'"]').after(e.html),$('.mentor-info[data-id="'+t+'"] img.icon-ajax').attr("src",appRoot+"/public/images/icon-up.png").attr("onclick",null))},error:function(){},complete:function(){ajaxLoad=!1}})}function addPermission(e){if(e.preventDefault(),1==ajaxLoad)return!1;var t=$("#permission-form").serialize();t+="&_token="+$('meta[name="csrf-token"]').attr("content"),$.ajax({url:baseUrl+"/nvp-admin/permissions-manager/add",type:"post",data:t,beforeSend:function(){ajaxLoad=!0},success:function(e){if(console.log(e),1==e.status)$("#display-permission-error").html(getError("success","Add new permission successfully.")),setTimeout(function(){$(".modal").modal("hide"),$(".alert-success").addClass("hidden"),location.reload()},800);else{if("errors"!=e.status)return!1;$("#display-permission-error").html(getError("danger",e.errors))}},error:function(){},complete:function(){ajaxLoad=!1}})}function updatePermission(e,t){if(t.preventDefault(),1==ajaxLoad)return!1;var a=$("#permission-form").serialize();a+="&_token="+$('meta[name="csrf-token"]').attr("content"),a+="&_method=put",$.ajax({url:baseUrl+"/nvp-admin/permissions-manager/update/"+e,type:"post",data:a,beforeSend:function(){ajaxLoad=!0},success:function(e){if(1==e.status)$("#display-permission-error").html(getError("success","Updated permission successfully.")),setTimeout(function(){$(".modal").modal("hide"),$(".alert-success").addClass("hidden"),location.reload()},800);else{if("errors"!=e.status)return!1;$("#display-permission-error").html(getError("danger",e.errors))}},error:function(){},complete:function(){ajaxLoad=!1}})}function toAlias(e){return e=e.toLowerCase(),e=e.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),e=e.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),e=e.replace(/ì|í|ị|ỉ|ĩ/g,"i"),e=e.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),e=e.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),e=e.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),e=e.replace(/đ/g,"d"),e=e.replace(/!|@|\$|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\'| |\"|\&|\#|\[|\]|~/g,"-"),e=e.replace(/-+-/g,"-"),e=e.replace(/^\-+|\-+$/g,"")}function convertToUSADate(e){var t=new Date(e),a=t.getDate(),i=t.getMonth()+1,n=t.getFullYear();a<10&&(a="0"+a),i<10&&(i="0"+i);var r=i+"/"+a+"/"+n;return r}function setValueDefault(){$(".modal input:enabled").val(""),$(".modal #category-image img").attr("src",baseUrl+"/public/images/no_photo.jpg"),$("#value_of_parent_id").length&&($("#value_of_parent_id").html("Search mentor"),$(".select-results").html("")),$("#value_of_user_id").length&&($("#value_of_user_id").html("Search User"),$(".select-results").html("")),$("#display-mentor-error").html(""),$(".display-mentor-error").html(""),$("#description").length>0&&(description=tinyMCE.get("description").setContent("")),$(".modal form select").val(1)}function createSlider(e){var t="";return t+='<div id="slider-'+e+'" class="item">',t+='<div class="item-header">',t+="<p>Slider "+e+":</p>",t+="</div>",t+='<div class="item-body">',t+='<a href="#" class="remove-item" onclick="return removeSlider('+e+', event);"><img src="'+appRoot+'/public/images/close_icon.png" alt="" /></a>',t+='<div class="item-content">',t+='<div class="line">',t+='<div class="line-left">Title</div>',t+='<div class="line-right">',t+='<input type="text" class="form-control input-sm" name="slider['+e+'][title]" value="" />',t+="</div>",t+="</div>",t+='<div class="line">',t+='<div class="line-left">Description</div>',t+='<div class="line-right">',t+='<textarea class="form-control input-sm" name="slider['+e+'][description]"></textarea>',t+="</div>",t+="</div>",t+='<div class="line">',t+='<div class="line-left">Link</div>',t+='<div class="line-right">',t+='<input type="text" class="form-control input-sm" name="slider['+e+'][link]" value="" />',t+="</div>",t+="</div>",t+='<div class="line">',t+='<div class="line-left">Image</div>',t+='<div class="line-right">',t+='<input type="file" class="" name="slider['+e+'][image]" />',t+="</div>",t+="</div>",t+="</div>",t+="</div>",t+='<div class="item-footer"></div>',t+="</div>"}function addSlider(e){e.preventDefault();var t=$("#slider-list .item").length;if(0==t)$("#slider-list").append(createSlider(1));else{var a=$("#slider-list .item:last").attr("id").replace("slider-","");$("#slider-list").append(createSlider(parseInt(a)+1))}}function removeSlider(e,t){t.preventDefault();var a=$("#slider-"+e).find('input[name="slider['+e+'][old_image]"]').val();return""!=a&&"undefined"!=typeof a&&($("#slider").append('<input type="hidden" name="slider['+e+'][delete]" value="1" />'),$("#slider").append('<input type="hidden" name="slider['+e+'][old_image]" value="'+a+'" />')),$("#slider-"+e).remove(),!1}function createPeople(e){var t="";return t+='<div id="people-'+e+'" class="item">',t+='<div class="item-header">',t+="<p>People "+e+":</p>",t+="</div>",t+='<div class="item-body">',t+='<a href="#" class="remove-item" onclick="return removePeople('+e+', event);"><img src="'+appRoot+'/public/images/close_icon.png" alt="" /></a>',t+='<div class="item-content">',t+='<div class="line">',t+='<div class="line-left">Name</div>',t+='<div class="line-right">',t+='<input type="text" class="form-control input-sm" name="people['+e+'][name]" value="" />',t+="</div>",t+="</div>",t+='<div class="line">',t+='<div class="line-left">Job</div>',t+='<div class="line-right">',t+='<input type="text" class="form-control input-sm" name="people['+e+'][job]" value="" />',t+="</div>",t+="</div>",t+='<div class="line">',t+='<div class="line-left">Avatar</div>',t+='<div class="line-right">',t+='<input type="file" class="" name="people['+e+'][image]" />',t+="</div>",t+="</div>",t+='<div class="line">',t+='<div class="line-left">Comment Title</div>',t+='<div class="line-right">',t+='<input type="text" class="form-control input-sm" name="people['+e+'][comment_title]" value="" />',t+="</div>",t+="</div>",t+='<div class="line">',t+='<div class="line-left">Comment</div>',t+='<div class="line-right">',t+='<textarea class="form-control input-sm" name="people['+e+'][comment]" /></textarea>',t+="</div>",t+="</div>",t+="</div>",t+="</div>",t+='<div class="item-footer"></div>',t+="</div>"}function addPeople(e){e.preventDefault();var t=$("#people-list .item").length;if(0==t)$("#people-list").append(createPeople(1));else{var a=$("#people-list .item:last").attr("id").replace("people-","");$("#people-list").append(createPeople(parseInt(a)+1))}}function removePeople(e,t){t.preventDefault();var a=$("#people-"+e).find('input[name="people['+e+'][old_image]"]').val();return""!=a&&"undefined"!=typeof a&&($("#people-say").append('<input type="hidden" name="people['+e+'][delete]" value="1" />'),$("#people-say").append('<input type="hidden" name="people['+e+'][old_image]" value="'+a+'" />')),$("#people-"+e).remove(),!1}function createFooterOptionMenu(e){var t="";return t+='<div id="footer-option-menu-'+e+'" class="item">',t+='<div class="item-header">',t+="<p>Menu "+e+":</p>",t+="</div>",t+='<div class="item-body">',t+='<a href="#" class="remove-item" onclick="return removeFooterOptionMenu('+e+', event);"><img src="'+appRoot+'/public/images/close_icon.png" alt="" /></a>',t+='<div class="item-content">',t+='<div class="line">',t+='<div class="line-left">',t+='<input type="text" class="form-control input-sm" name="footer_option_menu['+e+'][title]" value="" />',t+="</div>",t+='<div class="line-right">',t+='<input type="text" class="form-control input-sm" name="footer_option_menu['+e+'][link]" value="" />',t+="</div>",t+="</div>",t+="</div>",t+="</div>",t+='<div class="item-footer"></div>',t+="</div>"}function addFooterOptionMenu(e){e.preventDefault();var t=$("#footer-option-menu-list .item").length;if(0==t)$("#footer-option-menu-list").append(createFooterOptionMenu(1));else{var a=$("#footer-option-menu-list .item:last").attr("id").replace("footer-option-menu-","");$("#footer-option-menu-list").append(createFooterOptionMenu(parseInt(a)+1))}}function removeFooterOptionMenu(e,t){return t.preventDefault(),$("#footer-option-menu-"+e).remove(),!1}function onlyAllowValueIsNumber(e){$(e).keypress(function(e){var t=8==e.which||void 0==e.which||0==e.which?null:String.fromCharCode(e.which).match(/[^0-9]/);t&&e.preventDefault()})}function rotateIcon(e,t){e.animate({"-webkit-transform":"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)","-ms-transform":"rotate("+t+"deg)","-o-transform":"rotate("+t+"deg)",transform:"rotate("+t+"deg)",zoom:1})}function isDisplayButton(e){return 1==e}function createCountry(e,t){var a="";return a+='<div id="country-'+e+'" class="panel panel-default country">',a+='<div class="panel-heading" role="tab" id="heading-country-'+e+'">',a+='<h4 class="panel-title">',a+='<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-country-'+e+'" aria-expanded="false" aria-controls="collapse-country-'+e+'">',a+=t,a+="</a>",a+='<input type="hidden" name="country_list['+e+'][country]" value="'+t+'" />',a+='<div class="pull-right">',a+='<select name="country_list['+e+'][display_country]" class="display-country-button">',a+='<option value="1" selected="selected">On</option>',a+='<option value="0">Off</option>',a+="</select>",a+='<a href="javascript:void(0);"> | </a>',a+='<a href="#" class="edit-country" onclick="return editCountry('+e+', event);">Edit</a>',a+='<a href="javascript:void(0);"> | </a>',a+='<a href="#" class="delete-country" onclick="return removeCountry('+e+', event);">Delete</a>',a+="</div>",a+="</h4>",a+="</div>",a+='<div id="collapse-country-'+e+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading-country-'+e+'">',a+='<div class="panel-body">',a+='<div class="row">',a+='<div class="col-md-12">',a+='<div id="state-list-'+e+'" class="item-list state-list" data-country-index="'+e+'"></div>',a+='<a href="#" class="btn btn-primary pull-right add-item" onclick="return addState('+e+', event);">Add State</a>',a+="</div>",a+="</div>",a+="</div>",a+="</div>",a+="</div>"}function addCountry(e){e.preventDefault();var t=$("#country-modal #country-name").val().replace(/[\s]+/g," ").trim();if(!t.length||" "==t)return!1;var a=$("#country-and-state .country").length;if($("#country-modal").modal("hide"),$("#country-modal #country-name").val(null),0==a)$("#accordion").append(createCountry(1,t));else{var i=$("#country-and-state .country:last").attr("id").replace("country-","");$("#accordion").append(createCountry(parseInt(i)+1,t))}}function editCountry(e,t){t.preventDefault();var a=$('input[name="country_list['+e+'][country]"]').val().replace(/[\s]+/g," ").trim();return $("#country-modal #country-name").val(a),$("#country-modal").modal("show"),$("#submit-country-button").attr("onclick","return updateCountry("+e+", event);"),$("#country-modal h4.modal-title").html("Edit Country"),!1}function updateCountry(e,t){t.preventDefault();var a=$("#country-modal #country-name").val().replace(/[\s]+/g," ").trim();return a.length&&" "!=a&&($('input[name="country_list['+e+'][country]"]').val(a.trim()),$('a[href="#collapse-country-'+e+'"]').html(a.trim()),$("#country-modal").modal("hide")),!1}function removeCountry(e,t){t.preventDefault(),$("#country-"+e).length&&$("#country-"+e).remove()}function createState(e,t){var a="";return a+='<div id="" class="item state-item state-item-'+t+'" data-state-index="'+t+'">',a+='<div class="item-header">',a+="<p>State "+t+":</p>",a+="</div>",a+='<div class="item-body">',a+='<a href="#" class="remove-item" onclick="return removeState('+e+", "+t+', event);"><img src="'+appRoot+'/public/images/close_icon.png" alt="" /></a>',a+='<div class="item-content">',a+='<div class="line">',a+='<div class="line-left">Title</div>',a+='<div class="line-right">',a+='<input type="text" class="form-control input-sm" name="country_list['+e+'][state][]" value="" />',a+="</div>",a+="</div>",a+="</div>",a+="</div>",a+='<div class="item-footer"></div>',a+="</div>"}function addState(e,t){t.preventDefault();var a=$("#state-list-"+e+" .state-item").length;if(0==a)$("#state-list-"+e).append(createState(e,1));else{var i=$("#state-list-"+e+" .state-item:last").attr("data-state-index");$("#state-list-"+e).append(createState(e,parseInt(i)+1))}}function removeState(e,t,a){a.preventDefault(),$("#state-list-"+e+" .state-item-"+t).length&&$("#state-list-"+e+" .state-item-"+t).remove()}$(document).ready(function(){$("#users-table").dataTable({processing:!1,serverSide:!0,ajax:{url:"get-data-table-for-user",dataType:"json"},columns:[{data:null,width:"5%","class":"cid center",render:function(e){return'<div><input type="checkbox" name="cid[]" class="cid" value="'+e.id+'"/></div>'},bSortable:!1},{data:"name"},{data:"username"},{data:"email"},{data:"phone"},{data:"groupname","class":"center"},{data:null,width:"7%","class":"status center",render:function(e){return isDisplayButton(displayChangeStatusButton)?1==e.status?'<i class="icon public i-status" onclick="changeStatus('+e.id+',0)"></i>':'<i class="icon un-public i-status" onclick="changeStatus('+e.id+',1)"></i>':"-"},bSortable:!1},{data:null,ordertable:!1,width:"10%","class":"center",render:function(e,t,a){var i="";return isDisplayButton(displayEditButton)&&(i+='<a href="javascript:void(0);" class="anchor-edit" onclick="getDataById('+e.id+')">',i+='<i class="fa fa-pencil-square-o"></i>',i+="</a>"),isDisplayButton(displayDeleteButton)&&(i+='<a href="javascript:void(0);" class="anchor-delete" onclick="deleteItem('+e.id+')">',i+='<i class="fa fa-trash-o"></i>',i+="</a>"),0==i.length?"-":'<div class="function">'+i+"</div>"},bSortable:!1},{data:"id","class":"data-id"}],fnCreatedRow:function(e,t,a){$(e).attr("id","row-"+t.id)},bStateSave:!0,order:[8,"desc"],dom:'<"top"lf>rt<"bottom"ip><"clear">',lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]}),$("#permissions-table").dataTable({processing:!1,serverSide:!0,ajax:{url:"get-data-table-for-permissions",dataType:"json"},columns:[{data:null,width:"5%","class":"select",render:function(e){return'<div><input type="checkbox" name="cid[]" class="cid" value="'+e.id+'"/></div>'},bSortable:!1},{data:"name","class":"center"},{data:null,width:"13%","class":"center",render:function(e,t,a){return 0==e.description.length?"-":e.description},bSortable:!1},{data:"controller","class":"center"},{data:"action","class":"center"},{data:"type","class":"center"},{data:null,ordertable:!1,width:"13%","class":"center",render:function(e,t,a){var i="";return isDisplayButton(displayEditButton)&&(i+='<a href="javascript:void(0);" class="anchor-edit" onclick="getDataById('+e.id+')">',i+='<i class="fa fa-pencil-square-o"></i>',i+="</a>"),isDisplayButton(displayDeleteButton)&&(i+='<a href="javascript:void(0);" class="anchor-delete" onclick="deleteItem('+e.id+')">',i+='<i class="fa fa-trash-o"></i>',i+="</a>"),0==i.length?"-":'<div class="function">'+i+"</div>"},bSortable:!1},{data:"id","class":"center"}],fnCreatedRow:function(e,t,a){$(e).attr({id:"row-"+t.id})},bStateSave:!0,order:[7,"asc"],dom:'<"top"lf>rt<"bottom"ip><"clear">',lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]}),$("#groups-table").dataTable({processing:!1,serverSide:!0,ajax:{url:"get-data-table-for-group",dataType:"json"},columns:[{data:null,width:"5%","class":"center",render:function(e){return 1==e.id||2==e.id?"No":'<div><input type="checkbox" name="cid[]" class="cid" value="'+e.id+'"/></div>'},bSortable:!1},{data:"name"},{data:null,"class":"center",width:"18%",render:function(e){return e.group_acp?"Yes":"No"}},{data:"creator","class":"center"},{data:"editor","class":"center"},{data:null,width:"7%","class":"status center",render:function(e){return 1==e.id||2==e.id?"Public":isDisplayButton(displayChangeStatusButton)?1==e.status?'<i class="icon public i-status" onclick="changeStatus('+e.id+',0)"></i>':'<i class="icon un-public i-status" onclick="changeStatus('+e.id+',1)"></i>':"-"},bSortable:!1},{data:null,ordertable:!1,"class":"center",width:"10%",render:function(e,t,a){if(1==e.id||2==e.id)return"No Action";var i="";return isDisplayButton(displayEditButton)&&(i+='<a href="javascript:void(0);" class="anchor-edit" onclick="getDataById('+e.id+')">',i+='<i class="fa fa-pencil-square-o"></i>',i+="</a>"),isDisplayButton(displayDeleteButton)&&(i+='<a href="javascript:void(0);" class="anchor-delete" onclick="deleteItem('+e.id+')">',i+='<i class="fa fa-trash-o"></i>',i+="</a>"),0==i.length?"-":'<div class="function">'+i+"</div>"},bSortable:!1},{data:"id","class":"data-id"}],fnCreatedRow:function(e,t,a){$(e).attr("id","row-"+t.id)},bStateSave:!0,order:[7,"asc"],dom:'<"top"lf>rt<"bottom"ip><"clear">',lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]}),$("#course-categories-table").dataTable({processing:!1,serverSide:!0,ajax:{url:"get-data-table-for-course-categories",dataType:"json"},columns:[{data:null,width:"5%","class":"select",render:function(e){return'<div><input type="checkbox" name="cid[]" class="cid" value="'+e.id+'"/></div>'},bSortable:!1},{data:null,"class":"category-name",width:"30%",render:function(e){var t="&nbsp&nbsp&nbsp&nbsp".repeat(e.depth);return e.depth>1?(t+="<sup>|</sup>----",t+e.name):t+"<b>"+e.name+"</b>"},bSortable:!1},{width:"30%",data:"alias"},{data:null,width:"5%","class":"order-category center",render:function(e){return isDisplayButton(displayChangeStatusButton)?e.lft==parseInt(e.pleft)+1&&parseInt(e.rgt)+1==e.pright?"":e.lft==parseInt(e.pleft)+1?'<i class="fa fa-arrow-circle-down" onclick="moveNode('+e.id+",'right')\"></i>":parseInt(e.rgt)+1==e.pright?'<i class="fa fa-arrow-circle-up"  onclick="moveNode('+e.id+",'left')\"></i>":'<i class="fa fa-arrow-circle-up" style="margin-right: 3px" onclick="moveNode('+e.id+',\'left\')"></i><i class="fa fa-arrow-circle-down" onclick="moveNode('+e.id+",'right')\"></i>":"-";
},bSortable:!1},{data:null,"with":"3%","class":"featured center",render:function(e){return isDisplayButton(displayChangeStatusButton)?1==e.featured?'<i class="icon icon-featured i-status" onclick="changeFeatured('+e.id+',0)"></i>':'<i class="icon icon-no-featured i-status" onclick="changeFeatured('+e.id+',1)"></i>':"-"},bSortable:!1},{data:null,ordertable:!1,width:"13%",render:function(e,t,a){var i="";return isDisplayButton(displayEditButton)&&(i+='<a href="javascript:void(0);" class="anchor-edit" onclick="getDataById('+e.id+')">',i+='<i class="fa fa-pencil-square-o"></i>',i+="</a>"),isDisplayButton(displayDeleteButton)&&(i+='<a href="javascript:void(0);" class="anchor-delete" onclick="deleteNode('+e.id+')">',i+='<i class="fa fa-trash-o"></i>',i+="</a>"),i+='<a href="'+baseUrl+"/course/"+e.alias+"/"+e.id+'" target="_blank">',i+='<i class="fa fa-eye"></i>',i+="</a>",0==i.length?"-":'<div class="function">'+i+"</div>"},bSortable:!1},{data:"id",bSortable:!1,visible:!1},{data:"lft",visible:!1},{data:"name",visible:!1},{data:"description",visible:!1}],fnCreatedRow:function(e,t,a){$(e).attr("id","row-"+t.id)},bStateSave:!0,order:[7,"asc"],dom:'<"top"lf>rt<"bottom"ip><"clear">',lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]}),$("#courses-table").dataTable({processing:!1,serverSide:!0,ajax:{url:"get-data-table-for-courses",dataType:"json"},columns:[{data:null,width:"5%","class":"select",render:function(e){return'<div><input type="checkbox" name="cid[]" class="cid" value="'+e.id+'"/></div>'},bSortable:!1},{data:"name","class":"course-name",width:"30%"},{width:"5%",data:null,"class":"center",render:function(e){return e.image?'<img src="'+baseUrl+"/resources/upload/courses/48x48/"+e.image+'" alt="'+e.name+'">':'<img src="'+baseUrl+'/public/images/no-image.png" alt="no image">'},bSortable:!1},{data:"cname","class":"category center",width:"20%"},{data:null,width:"7%","class":"status center",render:function(e){return isDisplayButton(displayChangeStatusButton)?1==e.status?'<i class="icon public i-status" onclick="changeStatus('+e.id+',0)"></i>':'<i class="icon un-public i-status" onclick="changeStatus('+e.id+',1)"></i>':"-"},bSortable:!1},{data:null,"with":"3%","class":"featured center",render:function(e){return isDisplayButton(displayChangeStatusButton)?1==e.featured?'<i class="icon icon-featured i-status" onclick="changeFeatured('+e.id+',0)"></i>':'<i class="icon icon-no-featured i-status" onclick="changeFeatured('+e.id+',1)"></i>':"-"},bSortable:!1},{data:null,width:"7%","class":"register center",render:function(e){return isDisplayButton(displayChangeStatusButton)?1==e.register?'<i class="icon public i-status" onclick="changeRegisterStatus('+e.id+',0)"></i>':'<i class="icon un-public i-status" onclick="changeRegisterStatus('+e.id+',1)"></i>':"-"},bSortable:!1},{data:"order","class":"center"},{data:"hits","class":"center"},{data:null,ordertable:!1,width:"12%","class":"center action-button",render:function(e,t,a){var i="";return isDisplayButton(displayEditButton)&&(i+='<a href="javascript:void(0);" class="anchor-edit" onclick="getDataById('+e.id+')">',i+='<i class="fa fa-pencil-square-o"></i>',i+="</a>"),isDisplayButton(displayDeleteButton)&&(i+='<a href="javascript:void(0);" class="anchor-delete" onclick="deleteItem('+e.id+')">',i+='<i class="fa fa-trash-o"></i>',i+="</a>"),i+='<a href="'+baseUrl+"/lession/"+e.alias+"/"+e.id+'" target="_blank">',i+='<i class="fa fa-eye"></i>',i+="</a>",0==i.length?"-":'<div class="function">'+i+"</div>"},bSortable:!1},{data:"id","class":"center"},{data:"order",visible:!1}],fnCreatedRow:function(e,t,a){$(e).attr({id:"row-"+t.id,"class":"ui-state-default","data-id":t.id,"data-order":t.order})},bStateSave:!1,order:[7,"asc"],dom:'<"top"lf>rt<"bottom"ip><"clear">',lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]}),$("#post-categories-table").dataTable({processing:!1,serverSide:!0,ajax:{url:"get-data-table-for-post-categories",dataType:"json"},columns:[{data:null,width:"5%","class":"select",render:function(e){return'<div><input type="checkbox" name="cid[]" class="cid" value="'+e.id+'"/></div>'},bSortable:!1},{data:null,"class":"category-name",width:"30%",render:function(e){var t="&nbsp&nbsp&nbsp&nbsp".repeat(e.depth);return e.depth>1?(t+="<sup>|</sup>----",t+e.name):t+"<b>"+e.name+"</b>"},bSortable:!1},{width:"30%",data:"alias"},{data:null,width:"5%","class":"order-category center",render:function(e){return isDisplayButton(displayChangeStatusButton)?e.lft==parseInt(e.pleft)+1&&parseInt(e.rgt)+1==e.pright?"":e.lft==parseInt(e.pleft)+1?'<i class="fa fa-arrow-circle-down" onclick="moveNode('+e.id+",'right')\"></i>":parseInt(e.rgt)+1==e.pright?'<i class="fa fa-arrow-circle-up"  onclick="moveNode('+e.id+",'left')\"></i>":'<i class="fa fa-arrow-circle-up" style="margin-right: 3px" onclick="moveNode('+e.id+',\'left\')"></i><i class="fa fa-arrow-circle-down" onclick="moveNode('+e.id+",'right')\"></i>":"-"},bSortable:!1},{data:null,ordertable:!1,width:"20%",render:function(e,t,a){var i="";return isDisplayButton(displayEditButton)&&(i+='<a href="javascript:void(0);" class="anchor-edit" onclick="getDataById('+e.id+')">',i+='<i class="fa fa-pencil-square-o"></i>',i+="</a>"),isDisplayButton(displayDeleteButton)&&(i+='<a href="javascript:void(0);" class="anchor-delete" onclick="deleteItem('+e.id+')">',i+='<i class="fa fa-trash-o"></i>',i+="</a>"),0==i.length?"-":'<div class="function">'+i+"</div>"},bSortable:!1},{data:"id",bSortable:!1,visible:!1},{data:"lft",visible:!1},{data:"name",visible:!1},{data:"description",visible:!1}],fnCreatedRow:function(e,t,a){$(e).attr("id","row-"+t.id)},bStateSave:!0,order:[6,"asc"],dom:'<"top"lf>rt<"bottom"ip><"clear">',lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]}),$("#posts-table").dataTable({processing:!1,serverSide:!0,ajax:{url:"get-data-table-for-posts",dataType:"json"},columns:[{data:null,width:"5%","class":"select",render:function(e){return'<div><input type="checkbox" name="cid[]" class="cid" value="'+e.id+'"/></div>'},bSortable:!1},{data:"name","class":"course-name",width:"30%"},{width:"5%",data:null,"class":"center",render:function(e){return e.image?'<img src="'+baseUrl+"/resources/upload/posts/48x48/"+e.image+'" alt="'+e.name+'">':'<img src="'+baseUrl+'/public/images/no-image.png" alt="no image">'},bSortable:!1},{data:"cname","class":"category center",width:"20%"},{data:null,width:"7%","class":"status center",render:function(e){return isDisplayButton(displayChangeStatusButton)?1==e.status?'<i class="icon public i-status" onclick="changeStatus('+e.id+',0)"></i>':'<i class="icon un-public i-status" onclick="changeStatus('+e.id+',1)"></i>':"-"},bSortable:!1},{data:"order","class":"center"},{data:"hits","class":"center"},{data:null,ordertable:!1,width:"12%","class":"center action-button",render:function(e,t,a){var i="";return isDisplayButton(displayEditButton)&&(i+='<a href="javascript:void(0);" class="anchor-edit" onclick="getDataById('+e.id+')">',i+='<i class="fa fa-pencil-square-o"></i>',i+="</a>"),isDisplayButton(displayDeleteButton)&&(i+='<a href="javascript:void(0);" class="anchor-delete" onclick="deleteItem('+e.id+')">',i+='<i class="fa fa-trash-o"></i>',i+="</a>"),0==i.length?"-":'<div class="function">'+i+"</div>"},bSortable:!1},{data:"id","class":"center"},{data:"order",visible:!1}],fnCreatedRow:function(e,t,a){$(e).attr({id:"row-"+t.id,"class":"ui-state-default","data-id":t.id,"data-order":t.order})},bStateSave:!0,order:[5,"asc"],dom:'<"top"lf>rt<"bottom"ip><"clear">',lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]}),$("#pages-table").dataTable({processing:!1,serverSide:!0,ajax:{url:"get-data-table-for-pages",dataType:"json"},columns:[{data:null,width:"5%","class":"select",render:function(e){return'<div><input type="checkbox" name="cid[]" class="cid" value="'+e.id+'"/></div>'},bSortable:!1},{data:"name","class":"page-name",width:"30%"},{data:"username","class":"center"},{data:"created_at","class":"center"},{data:"hits","class":"center"},{data:null,ordertable:!1,"class":"center action-button",width:"15%",render:function(e,t,a){var i="";return isDisplayButton(displayEditButton)&&(i+='<a href="javascript:void(0);" class="anchor-edit" onclick="getDataById('+e.id+')">',i+='<i class="fa fa-pencil-square-o"></i>',i+="</a>"),isDisplayButton(displayDeleteButton)&&(i+='<a href="javascript:void(0);" class="anchor-delete" onclick="deleteItem('+e.id+')">',i+='<i class="fa fa-trash-o"></i>',i+="</a>"),i+='<a href="'+baseUrl+"/page/"+e.alias+"/"+e.id+'" target="_blank">',i+='<i class="fa fa-eye"></i>',i+="</a>",0==i.length?"-":'<div class="function">'+i+"</div>"},bSortable:!1},{data:"id","class":"center"}],fnCreatedRow:function(e,t,a){$(e).attr({id:"row-"+t.id})},bStateSave:!1,order:[3,"asc"],dom:'<"top"lf>rt<"bottom"ip><"clear">',lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]}),$("#mentors-table").dataTable({processing:!1,serverSide:!0,ajax:{url:"get-data-table-for-mentors",dataType:"json"},columns:[{data:null,width:"5%","class":"select",render:function(e){return'<div><input type="checkbox" name="cid[]" class="cid" value="'+e.id+'"/></div>'},bSortable:!1},{data:"username","class":"page-name",width:"15%"},{data:"ssn","class":"center",render:function(e){return"xxx-xx-xxxx"}},{data:"phone","class":"center"},{data:"mentor","class":"center"},{data:"tuition","class":"center"},{data:"bitcoin","class":"center"},{data:null,width:"7%","class":"status center",render:function(e){return isDisplayButton(displayChangeStatusButton)?1==e.status?'<i class="icon public i-status" onclick="changeStatus('+e.id+',0)"></i>':'<i class="icon un-public i-status" onclick="changeStatus('+e.id+',1)"></i>':"-"},bSortable:!1},{data:null,ordertable:!1,"class":"center action-button",width:"10%",render:function(e,t,a){var i="";return isDisplayButton(displayEditButton)&&(i+='<a href="javascript:void(0);" class="anchor-edit" onclick="getDataById('+e.id+')">',i+='<i class="fa fa-pencil-square-o"></i>',i+="</a>"),isDisplayButton(displayShowDescendantButton)&&(i+='<a class="anchor-show-descendant" href="'+baseUrl+"/nvp-admin/mentors-manager/show-descendants/"+e.id+'" target="_blank">',i+='<i class="fa fa-sitemap" aria-hidden="true"></i>',i+="</a>"),isDisplayButton(displayShowAncestorButton)&&(i+='<a class="anchor-show-ancestor" href="'+baseUrl+"/nvp-admin/mentors-manager/show-ancestors/"+e.id+'" target="_blank">',i+='<i class="fa fa-sitemap ancestors" aria-hidden="true"></i>',i+="</a>"),0==i.length?"-":'<div class="function">'+i+"</div>"},bSortable:!1},{data:"id","class":"center"},{data:"lft",visible:!1}],fnCreatedRow:function(e,t,a){$(e).attr({id:"row-"+t.id})},bStateSave:!0,order:[10,"asc"],dom:'<"top"lf>rt<"bottom"ip><"clear">',lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]})});var controllerName=window.location.href.replace(/.*\//,"");controllerName.indexOf("?")&&(controllerName=controllerName.replace(/\?.*/,"")),$.ajaxSetup({statusCode:{403:function(){return"menus-manager"!=controllerName&&alert("Action denied. !"),!1}}});var ajaxSearchMentor=!1,ajaxLoad=!1;$(document).ready(function(){$("#checkall").change(function(){$(this).is(":checked")?$(".cid").prop("checked",!0):$(".cid").prop("checked",!1)}),$("#add-item").click(function(){$("#password-of-user").length&&$("#password-of-user").show(),$("#show-ip-address").length&&$("#show-ip-address").hide(),$("#add-or-edit").modal("show"),$("#add-or-edit").removeClass("edit"),$("#add-or-edit").addClass("add"),setValueDefault()}),$(document).on("keyup","#name",function(){$(this).val()&&$(this).hasClass("error")&&$(this).removeClass("error"),$("#alias").val(toAlias($(this).val()))}),$(document).on("keyup",".modal #name",function(){$(this).val()&&$(this).hasClass("error")&&$(this).removeClass("error"),$(".modal #alias").val(toAlias($(this).val()))}),$("#upload-img").on("change",function(){$(".modal form").submit()}),$(".modal form").submit(function(e){var t=new FormData(this),a=$("#upload-img").attr("data-type");return t.append("option",$("#upload-img").attr("data-type")),t.append("_token",$('meta[name="csrf-token"]').attr("content")),t.append("imageOld",$("#image").val()),uploadImg(t,a),!1}),$("#add-or-edit").on("hidden.bs.modal",function(e){if(e.preventDefault(),$(".add-edit-group-modal").length){$(".add-edit-group-modal").trigger("reset"),$(".add-edit-permission-modal h4.modal-title").html("Add Group");var t=$(".add-edit-group-modal .list-action").find('input[type="checkbox"]');t.length&&t.map(function(e,t){$(t).prop("checked",!1),$(t).closest("label").removeAttr("class")}),$(".add-edit-group-modal #submit-group-button").attr({onclick:"addGroup(event)","data-action":"add","data-id":null}),$("#display-group-error").html("")}$(".add-edit-mentor-modal").length&&$(".add-edit-mentor-modal h4.modal-title").html("Add Mentor"),$(".add-edit-permission-modal").length&&($(".add-edit-permission-modal form").trigger("reset"),$(".add-edit-permission-modal #display-permission-error").html(""),$(".add-edit-permission-modal .display-permission-error").html(""),$(".add-edit-permission-modal #submit-permission-button").attr("onclick","return addPermission(event);"),$(".add-edit-permission-modal #submit-permission-button").attr("data-action","add"),$(".add-edit-permission-modal #submit-permission-button").attr("data-id",null),$(".add-edit-permission-modal h4.modal-title").html("Add Permission"))}),$("#add-or-edit").on("shown.bs.modal",function(e){e.preventDefault(),$(".add-edit-permission-modal").length&&"edit"==$(".add-edit-permission-modal #submit-permission-button").attr("data-action")&&$(".add-edit-permission-modal h4.modal-title").html("Edit Permission"),$(".add-edit-group-modal").length&&("edit"==$(".add-edit-group-modal #submit-group-button").attr("data-action")?$(".add-edit-group-modal h4.modal-title").html("Edit Group"):$(".add-edit-group-modal h4.modal-title").html("Add Group"))}),$("#add-or-edit").on("hidden.bs.modal",function(e){$("#display-mentor-error").html(""),$("#search-mentor-wrapper").html(""),$("#search-user-wrapper").html(""),$(".display-mentor-error").html(""),$("#search-user-field").attr("data-user-id",""),$("#search-mentor-field").attr("data-parent-id","1")}),$("#country-modal").on("hidden.bs.modal",function(e){$("#country-modal #country-form").trigger("reset"),$("#country-modal #submit-country-button").attr("onclick","return addCountry(event);"),$("#country-modal h4.modal-title").html("Add Country")}),$("#courses-table tbody").length>0&&($("#courses-table tbody").sortable({revert:!0,stop:function(e,t){var a=$(t.item).attr("data-id");$(t.item).attr("style","background-color: rgba(226, 249, 218, 0.38)");var i=parseInt($("#courses-table tbody #row-"+a).index())+1,n=parseInt($("#courses-table tbody tr:nth-child("+(i-1)+")").data("order")),r=$(t.item).attr("data-order"),s="";if(i!=r){if(n>r)s="right";else{s="left";var n=parseInt($("#courses-table tbody tr:nth-child("+(i+1)+")").data("order"))}updateOrdering(a,n,s)}}}),$("#courses-table tbody tr .course-name").draggable({connectToSortable:"#courses-table tbody",helper:"clone",revert:"true"})),$("#posts-table tbody").length>0&&($("#posts-table tbody").sortable({revert:!0,stop:function(e,t){var a=$(t.item).attr("data-id");$(t.item).attr("style","background-color: rgba(226, 249, 218, 0.38)");var i=parseInt($("#posts-table tbody #row-"+a).index())+1,n=parseInt($("#posts-table tbody tr:nth-child("+(i-1)+")").data("order")),r=$(t.item).attr("data-order"),s="";if(i!=r){if(n>r)s="right";else{s="left";var n=parseInt($("#posts-table tbody tr:nth-child("+(i+1)+")").data("order"))}updateOrdering(a,n,s)}}}),$("#posts-table tbody tr").draggable({connectToSortable:"#posts-table tbody",helper:"clone",revert:"true"})),$(".close").on("click",function(){$(".modal form input").val(""),$("#description").length>0,tinyMCE.get("description").setContent(""),$(".modal #category-image img").attr("src",baseUrl+"/public/images/no_photo.jpg")}),$(".side-sortables h3").click(function(){$(this).parent().parent().parent().toggleClass("active"),$(this).parent().parent().parent().hasClass("active")?$(this).children().attr("class","fa fa-caret-down"):$(this).children().attr("class","fa fa-caret-up")}),$(".accordion-section-content button").click(function(){var e=$(this).parent().find('input[type="radio"]:checked').val();e?($(this).parent().find("#menu-link").val(e),$(this).parent().find("#menu-link").show(500)):alert("Please choose name which insert link!")}),$("#result").on("click","#toggle-statistic-sidebar",function(e){return e.preventDefault(),$("#result .search-and-statistic").hasClass("toggle")?($("#result .search-and-statistic").removeClass("toggle"),$("#result").css("paddingRight","300px"),$(this).css("right","300px")):($("#result .search-and-statistic").addClass("toggle"),$("#result").css("paddingRight","0px"),$(this).css("right","0px")),!1}),$("#search-mentor-suggest").on("click","li",function(){var e=$(this).html(),t=$(this).attr("data-id");$("#search-mentor-field").val(e),$("#search-mentor-field").attr("data-parent-id",t),$(this).parents("#search-mentor-suggest").html("").hide()}),$("#search-user-suggest").on("click","li",function(){var e=$(this).html(),t=$(this).attr("data-id");$("#search-user-field").val(e),$("#search-user-field").attr("data-user-id",t),$(this).parents("#search-user-suggest").html("").hide()}),jQuery(window).load(function(){setTimeout(function(){$(".loading-container").addClass("loading-inactive")},0)});var e={selector:".modal #description",height:350,theme:"modern",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools codesample toc","advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste youtube"],toolbar1:"undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | youtube",toolbar2:"print preview media | forecolor backcolor emoticons | codesample",image_advtab:!0,extended_valid_elements:"+iframe[src|width|height|name|align|class]",content_css:["//fonts.googleapis.com/css?family=Lato:300,300i,400,400i","//www.tinymce.com/css/codepen.min.css"],external_filemanager_path:baseUrl+"/public/tinymce/filemanager/",filemanager_title:"File Manager",external_plugins:{filemanager:baseUrl+"/public/tinymce/filemanager/plugin.min.js"}};tinymce.init(e),onlyAllowValueIsNumber("#ssn"),onlyAllowValueIsNumber("#phone");var t;$("#ssn").on("keyup",function(){t=$(this).val(),3!=t.length&&6!=t.length||$(this).val(t+" ")});var a;$("#phone").on("keyup",function(){a=$(this).val(),3!=a.length&&7!=a.length||$(this).val(a+" ")}),$(".select-container").on("click",function(){$(this).addClass("active")}),$("#search_parent_id").on("change",function(){var e=$(this).val();e&&getMentorByNameOrEmail(e)}),$("#search_user_id").on("change",function(){var e=$(this).val();e&&getUserByNameOrEmail(e)}),$(document).on("click",".select-results li",function(){$(this).data("id")&&($(this).parents(".select-container").find(".select-chosen").html($(this).data("value")),$(this).parents(".select-container").find("input").val($(this).data("value")),$(this).parents(".select-container").find("input[type=hidden]").val($(this).data("id")),$(".select-container").removeClass("active"))}),$("#email-of-mentor i").on("click",function(){$("#email-password, #confirm-email-password").toggle()}),$("#send-mail").on("click",function(){$("#toEmail").length&&$("#toEmail").val()?sendMail($("#toEmail").val()):alert("Please enter your email to test!")}),$("#result").on("click",".icon-ajax",function(e){e.preventDefault(),$(this).closest(".mentor-info").next("ul.list-nodes").length&&($(this).closest(".mentor-info").next("ul.list-nodes:first").remove(),$(this).attr("onclick","return getAllDescendantsOfCurrentMentor(event, "+$(this).closest(".mentor-info").attr("data-id")+");"),$(this).attr("src",appRoot+"/public/images/icon-down.png"))}),$("#permission .list-controller").on("click","li",function(e){e.preventDefault(),$(this).removeClass("active"),$(".list-action").find("ul.action").hide(),$(this).siblings().removeClass("active"),$(this).addClass("active");var t=$(this).attr("data-controller");$(".list-action").find('ul.action[data-controller="'+t+'"]').show()}),$("#permission .list-action").on("click","label",function(e){e.preventDefault(),$(this).toggleClass("active"),$(this).hasClass("active")?$(this).find("input").prop("checked",!0):$(this).find("input").prop("checked",!1),console.log($(this).find("input")[0]),console.log($(this).find("input").prop("checked"))})});

